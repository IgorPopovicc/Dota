<dota-loading></dota-loading>
<section *ngIf="product" class="container-fluid product">
    <gallery [items]="images" [thumbPosition]="isPhone || isTablet ? 'bottom' : 'left'"></gallery>
    <div class="product-details">
        <h5 class="type">{{ product.type }}</h5>
        <h1 class="name">{{ product.name }}</h1>
        <div class="product-price">
            <h2 class="price">{{ product.price }}<span class="value">RSD</span></h2>
        </div>
        <div class="about">
            <div class="color">
                <h5>Boja</h5>
                <div class="product-colors">
                    @for (item of product.productDetails; track $index) {
                        <div class="color-box" (click)="changeProductDetails(item.id)" [ngStyle]="{'background-color': item.color}"></div>
                    }
                </div>
            </div>
            <div class="size">
                <h5>Velicina</h5>
                <p>{{ product.size }}</p>
            </div>
            <div class="info">
                <h5>Info</h5>
                <p>{{ selectedProductDetails.info }}</p>
            </div>
            <div class="info">
                <h5>Stanje</h5>
                <p>{{ selectedProductDetails.quantity }}</p>
            </div>
        </div>
        <div class="add-to-bag">
            <span>*poštarina nije uključena u cenu</span>
            <div *ngIf="!outOfStocks" (click)="addToBag()" class="add-to-bag-button">
                <svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M13.0665 18.3438C12.8265 18.605 12.499 18.75 12.1428 18.75H2.50027C2.14527 18.75 1.81653 18.605 1.57778 18.3425C1.33777 18.08 1.22402 17.7412 1.25653 17.3862L2.26778 6.24999H3.57151V8.12499C3.57151 8.46999 3.85151 8.74999 4.19652 8.74999C4.54151 8.74999 4.82152 8.46999 4.82152 8.12499V6.24999H9.82152V8.12499C9.82152 8.46999 10.1015 8.74999 10.4465 8.74999C10.7915 8.74999 11.0715 8.46999 11.0715 8.12499V6.24999H12.3753L13.3878 17.3875C13.4203 17.7412 13.3065 18.0812 13.0665 18.3437V18.3438ZM4.82153 3.75C4.82153 2.37125 5.94276 1.25 7.32152 1.25C7.99277 1.25 8.62152 1.50875 9.09277 1.97875C9.56403 2.44875 9.82153 3.07875 9.82153 3.75V5H4.82153V3.75ZM14.634 17.2738L13.5703 5.56875C13.5403 5.24625 13.2703 5 12.9465 5H11.0715V3.75C11.0715 2.745 10.6828 1.80125 9.97654 1.095C9.27029 0.38875 8.32654 0 7.32153 0C5.25404 0 3.57153 1.6825 3.57153 3.75V5H1.69653C1.3728 5 1.10279 5.24625 1.07405 5.56875L0.010278 17.2738C-0.053472 17.9713 0.181538 18.6688 0.654028 19.1863C1.12653 19.7038 1.79904 20 2.50027 20H12.144C12.8453 20 13.5178 19.7038 13.9903 19.1863C14.4628 18.6688 14.6965 17.9713 14.634 17.2738H14.634Z" fill="white"/>
                </svg>
                <span>dodaj u korpu</span>
            </div>
            <div *ngIf="outOfStocks" class="out-of-stock">
                <svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M13.0665 18.3438C12.8265 18.605 12.499 18.75 12.1428 18.75H2.50027C2.14527 18.75 1.81653 18.605 1.57778 18.3425C1.33777 18.08 1.22402 17.7412 1.25653 17.3862L2.26778 6.24999H3.57151V8.12499C3.57151 8.46999 3.85151 8.74999 4.19652 8.74999C4.54151 8.74999 4.82152 8.46999 4.82152 8.12499V6.24999H9.82152V8.12499C9.82152 8.46999 10.1015 8.74999 10.4465 8.74999C10.7915 8.74999 11.0715 8.46999 11.0715 8.12499V6.24999H12.3753L13.3878 17.3875C13.4203 17.7412 13.3065 18.0812 13.0665 18.3437V18.3438ZM4.82153 3.75C4.82153 2.37125 5.94276 1.25 7.32152 1.25C7.99277 1.25 8.62152 1.50875 9.09277 1.97875C9.56403 2.44875 9.82153 3.07875 9.82153 3.75V5H4.82153V3.75ZM14.634 17.2738L13.5703 5.56875C13.5403 5.24625 13.2703 5 12.9465 5H11.0715V3.75C11.0715 2.745 10.6828 1.80125 9.97654 1.095C9.27029 0.38875 8.32654 0 7.32153 0C5.25404 0 3.57153 1.6825 3.57153 3.75V5H1.69653C1.3728 5 1.10279 5.24625 1.07405 5.56875L0.010278 17.2738C-0.053472 17.9713 0.181538 18.6688 0.654028 19.1863C1.12653 19.7038 1.79904 20 2.50027 20H12.144C12.8453 20 13.5178 19.7038 13.9903 19.1863C14.4628 18.6688 14.6965 17.9713 14.634 17.2738H14.634Z" fill="black"/>
                </svg>
                <span>dodaj u korpu</span>
            </div>
            <div *ngIf="outOfStocks" (click)="makeReservation()" class="add-to-bag-button">
                <svg width="15" height="20" viewBox="0 0 15 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path fill-rule="evenodd" clip-rule="evenodd" d="M13.0665 18.3438C12.8265 18.605 12.499 18.75 12.1428 18.75H2.50027C2.14527 18.75 1.81653 18.605 1.57778 18.3425C1.33777 18.08 1.22402 17.7412 1.25653 17.3862L2.26778 6.24999H3.57151V8.12499C3.57151 8.46999 3.85151 8.74999 4.19652 8.74999C4.54151 8.74999 4.82152 8.46999 4.82152 8.12499V6.24999H9.82152V8.12499C9.82152 8.46999 10.1015 8.74999 10.4465 8.74999C10.7915 8.74999 11.0715 8.46999 11.0715 8.12499V6.24999H12.3753L13.3878 17.3875C13.4203 17.7412 13.3065 18.0812 13.0665 18.3437V18.3438ZM4.82153 3.75C4.82153 2.37125 5.94276 1.25 7.32152 1.25C7.99277 1.25 8.62152 1.50875 9.09277 1.97875C9.56403 2.44875 9.82153 3.07875 9.82153 3.75V5H4.82153V3.75ZM14.634 17.2738L13.5703 5.56875C13.5403 5.24625 13.2703 5 12.9465 5H11.0715V3.75C11.0715 2.745 10.6828 1.80125 9.97654 1.095C9.27029 0.38875 8.32654 0 7.32153 0C5.25404 0 3.57153 1.6825 3.57153 3.75V5H1.69653C1.3728 5 1.10279 5.24625 1.07405 5.56875L0.010278 17.2738C-0.053472 17.9713 0.181538 18.6688 0.654028 19.1863C1.12653 19.7038 1.79904 20 2.50027 20H12.144C12.8453 20 13.5178 19.7038 13.9903 19.1863C14.4628 18.6688 14.6965 17.9713 14.634 17.2738H14.634Z" fill="white"/>
                </svg>
                <span>rezerviši</span>
            </div>
        </div>
        <div class="icon-info">
            <div class="delivery-time">
                <img src="./assets/images/icons/delivery-package.svg" alt="Delivery package">
                <span>dostava za<br>2 do 4 dana</span>
            </div>
            <samp class="line"></samp>
            <div class="delivery-price">
                <img src="./assets/images/icons/shipping.svg" alt="Delivery package">
                <span>poštarina od<br>350 do 360 rsd</span>
            </div>
        </div>
    </div>
</section>
<section class="container-fluid">
    <h1 class="main-title">Pogledaj još</h1>
    <div class="other-products">
        <div class="products">
            @for (item of products; track $index) {
              @if ($index <= 4) {
                <dota-product (click)="openProductDetails(item)" class="product-item" [product]="item"></dota-product>
              }
              } @empty {
                <div class="empty-message">
                  <h3>Nemamo trazeni proizvod!</h3>
                </div>
              }
              <div class="show-more">
                <h3 class="show-more-text">Prikaži<br>sve<br>proizvode</h3>
                <div class="show-more-button">
                    <p class="button">Pogledaj
                        <svg xmlns="http://www.w3.org/2000/svg" width="17" height="12" viewBox="0 0 17 12" fill="none">
                            <path d="M0.000978281 6.00098H15.001" stroke="#000C22" stroke-width="1.5"/>
                            <path d="M10 0.99902L15 5.99951L10 11.001" stroke="#000C22" stroke-width="1.5"/>
                        </svg>
                    </p>
                </div>
              </div>
        </div>
        <div class="vibe-image">
            <img src="./assets/images/presentation-images/slider-image-4.jpeg" alt="vibe-image">
        </div>
    </div>
    <div class="other-products-scroll">
        <div class="products-scroll">
            @for (item of products; track $index) {
              @if ($index <= 8) {
                <dota-product (click)="openProductDetails(item)" class="product-item" [product]="item"></dota-product>
              }
              } @empty {
                <div class="empty-message">
                  <h3>Nemamo trazeni proizvod!</h3>
                </div>
              }
        </div>
    </div>
</section>
<promotion-dialog *ngIf="displayPromotion" (closed)="handleClose()" description="Uz torbu izaberi novčanik po promo ceni!" oldPrice="900" newPrice="700" buttonText="Izaberi novčanik"></promotion-dialog>
